---
title: 使用又拍云CDN为博客加速
date: 2022-12-23 15:28:40
author: 青蛙瓷器
img: http://pic.tanzhang.work/blog/gallary/221223.jpg
top: false
cover: false
coverImg: 
toc: true
mathjax: false
categories: 博客
tags:
  - cdn
---
上一篇文章 个人博客搭建流程 中我们讲到使用 github pages 可以很方便的搭建静态博客，但是存在访问速度慢的问题，本章我们来讲一下如何通过 cdn 来解决这个问题。

CDN（Content Distribution Network，内容分发网络）是一种十分透明的应用，它为互联网站点提供分流功能。假设你现在需要购买一台苹果手机，你不应该坐飞机到美国苹果公司的总部去购买，而应该直接到就近的苹果专卖店或零售商进行购买。cdn 的作用就跟专卖店或零售商类似，它为你提供目标站点的就近的访问地址，以此来加速你对网站的访问。

仅从网络传输的角度看，一个互联网系统的速度取决于以下四点因素：

- 服务器接入网络运营商的链路所能提供的出口带宽。
- 客户端接入网络运营商的链路所能提供的入口带宽。
- 从网站到用户之间经过的不同运营商之间互联节点的带宽，一般来说两个运营商之间只有固定的若干个点是互通的，所有跨运营商之间的交互都要经过这些点。
- 从网站到用户之间的物理链路传输时延。爱打游戏的同学应该都清楚，延迟（Ping 值）比带宽更重要。

以上四个网络问题，除了第二点只能通过换一个好点的宽带解决以外，其余问题都可以通过内容分发网络来解决。

内容分发网络的工作过程，主要涉及路由解析、内容分发、负载均衡和 CDN 应用，这里我们主要讨论下路由解析和内容分发的工作过程。

## 路由解析

在没有使用 CDN 的情况下，假设需要访问站点 www.baidu.com，一次针对该域名的 DNS 解析过程如下图所示：
![DNS服务器解析域名过程](http://pic.tanzhang.work/blog/20221223181046.png)

客户请求首先会访问距离自己最近的 DNS 服务器查询目标域名对应的服务器 ip，如果该 DNS 服务器知道该 ip，则直接返回给客户端，否则该 DNS 服务器会请求根域 DNS 服务器尝试获取目标 ip，根域服务器是
